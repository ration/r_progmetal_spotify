{% load catalog_extras %}

{% if is_paginated %}
<div class="pagination mt-8 mb-4 flex flex-col sm:flex-row items-center justify-between gap-4">
    <!-- Pagination info -->
    <div class="text-sm text-gray-600">
        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
        (Showing {{ page_obj.start_index }}-{{ page_obj.end_index }} of {{ page_obj.paginator.count }} albums)
    </div>

    <!-- Page navigation controls -->
    <div class="flex items-center gap-2">
        {% if page_obj.has_previous %}
            <!-- Previous page button -->
            <a href="?{% url_replace request page=page_obj.previous_page_number %}"
               hx-get="?{% url_replace request page=page_obj.previous_page_number %}"
               hx-target="#album-tiles"
               hx-push-url="true"
               hx-swap="innerHTML settle:scroll:top"
               class="btn btn-sm btn-outline">
                ← Previous
            </a>

            <!-- First page button (if not on page 1 or 2) -->
            {% if page_obj.number > 2 %}
                <a href="?{% url_replace request page=1 %}"
                   hx-get="?{% url_replace request page=1 %}"
                   hx-target="#album-tiles"
                   hx-push-url="true"
                   hx-swap="innerHTML settle:scroll:top"
                   class="btn btn-sm btn-outline">
                    1
                </a>
                {% if page_obj.number > 3 %}
                    <span class="text-gray-500">...</span>
                {% endif %}
            {% endif %}
        {% else %}
            <button class="btn btn-sm btn-outline btn-disabled" disabled>
                ← Previous
            </button>
        {% endif %}

        <!-- Current page indicator -->
        <span class="btn btn-sm btn-primary">{{ page_obj.number }}</span>

        {% if page_obj.has_next %}
            <!-- Last page button (if not on last 2 pages) -->
            {% if page_obj.number < page_obj.paginator.num_pages|add:"-1" %}
                {% if page_obj.number < page_obj.paginator.num_pages|add:"-2" %}
                    <span class="text-gray-500">...</span>
                {% endif %}
                <a href="?{% url_replace request page=page_obj.paginator.num_pages %}"
                   hx-get="?{% url_replace request page=page_obj.paginator.num_pages %}"
                   hx-target="#album-tiles"
                   hx-push-url="true"
                   hx-swap="innerHTML settle:scroll:top"
                   class="btn btn-sm btn-outline">
                    {{ page_obj.paginator.num_pages }}
                </a>
            {% endif %}

            <!-- Next page button -->
            <a href="?{% url_replace request page=page_obj.next_page_number %}"
               hx-get="?{% url_replace request page=page_obj.next_page_number %}"
               hx-target="#album-tiles"
               hx-push-url="true"
               hx-swap="innerHTML settle:scroll:top"
               class="btn btn-sm btn-outline">
                Next →
            </a>
        {% else %}
            <button class="btn btn-sm btn-outline btn-disabled" disabled>
                Next →
            </button>
        {% endif %}
    </div>
</div>
{% endif %}
